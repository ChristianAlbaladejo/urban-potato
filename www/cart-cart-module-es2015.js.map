{"version":3,"sources":["./src/app/cart/cart.page.html","./src/app/cart/cart-routing.module.ts","./src/app/cart/cart.module.ts","./src/app/cart/cart.page.scss","./src/app/cart/cart.page.ts"],"names":[],"mappings":"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","file":"cart-cart-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Carrito</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list *ngIf=\\\"products\\\">\\n    <ion-list-header>\\n      Pedido\\n    </ion-list-header>\\n\\n    <ion-item-sliding *ngFor=\\\"let p of products.products\\\">\\n      <ion-item-options side=\\\"start\\\">\\n        <ion-item-option color=\\\"danger\\\" (click)=\\\"remove(p)\\\"><ion-icon style=\\\"zoom:1.5;\\\" name=\\\"trash-outline\\\"></ion-icon></ion-item-option>\\n      </ion-item-options>\\n    <ion-item>\\n      <ion-thumbnail slot=\\\"start\\\">\\n        <ion-img\\n          src=\\\"https://rockcontent.com/es/wp-content/uploads/2019/02/o-que-e-produto-no-mix-de-marketing-1280x720.png\\\">\\n        </ion-img>\\n      </ion-thumbnail>\\n      <ion-label>\\n        <h2>{{p.aRTALIAS}}</h2>\\n        <h3>{{p.dESCART}}</h3>\\n        <p>x{{p.quantity}}</p>\\n      </ion-label>\\n      <div slot=\\\"end\\\">\\n        <h2>{{p.pRCCOMPRA}}€</h2>\\n      </div>\\n    </ion-item>\\n    </ion-item-sliding>\\n    <ion-item>\\n      <h3>Total:</h3>\\n      <div slot=\\\"end\\\">\\n        <h2>{{getTotal() | number : '1.2-2'}}€</h2>\\n      </div>\\n    </ion-item>\\n  </ion-list>\\n\\n  <ion-radio-group value=\\\"credito\\\">\\n    <ion-list-header>\\n      <ion-label>Forma de pago</ion-label>\\n    </ion-list-header>\\n\\n    <ion-item>\\n      <ion-label>Crédito</ion-label>\\n      <ion-radio slot=\\\"start\\\" value=\\\"credito\\\"></ion-radio>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label>Efectivo</ion-label>\\n      <ion-radio slot=\\\"start\\\" value=\\\"efectivo\\\"></ion-radio>\\n    </ion-item>\\n\\n  </ion-radio-group>\\n\\n  <ion-list>\\n    <ion-list-header>Envio</ion-list-header>\\n    <ion-item>\\n      <ion-label>Pedido urgente</ion-label>\\n      <ion-checkbox color=\\\"primary\\\" checked slot=\\\"start\\\"></ion-checkbox>\\n    </ion-item>\\n  </ion-list>\\n  <ion-button [disabled]=\\\"products.products.length == 0\\\" (click)=\\\"sendOrder()\\\" shape=\\\"round\\\" expand=\\\"block\\\">Pedir</ion-button>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CartPage } from './cart.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CartPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CartPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CartPageRoutingModule } from './cart-routing.module';\n\nimport { CartPage } from './cart.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CartPageRoutingModule\n  ],\n  declarations: [CartPage]\n})\nexport class CartPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NhcnQvY2FydC5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { Plugins } from '@capacitor/core';\nimport { ApiService } from '../services/api.service';\nimport { LoadingController } from '@ionic/angular';\nimport { AlertController } from '@ionic/angular';\nimport { AuthenticationService } from '../services/authentication.service';\nimport { Router } from '@angular/router';\n\nconst { Storage } = Plugins;\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.page.html',\n  styleUrls: ['./cart.page.scss'],\n  providers: [ApiService]\n})\nexport class CartPage implements OnInit {\n  public products;\n  constructor(\n    private apiService: ApiService,\n    public loadingController: LoadingController,\n    public alertController: AlertController,\n    private authService: AuthenticationService,\n    private router: Router) { }\n\n  ngOnInit() {\n    this.products = history.state\n  }\n\n  getTotal() {\n    var total = 0;\n    for (let i = 0; i < this.products.products.length; i++) {\n      total += parseFloat(this.products.products[i].pRCCOMPRA.replace(/,/, '.')) * this.products.products[i].quantity;\n    }\n    return total;\n  }\n\n  async remove(p){\n    for (var i = 0; i < this.products.products.length; i++) {\n      if (this.products.products[i].iD == p.iD) {\n        this.products.products.splice(i, 1);\n        await Storage.remove({ key: 'PRODUCTS' });\n        Storage.set({ key: 'PRODUCTS', value: JSON.stringify(this.products.products) })\n        break;\n      }\n    }\n  }\n\n  async sendOrder(){\n    const loading = await this.loadingController.create({\n      message: 'Cargando...',\n      translucent: true,\n    });\n    await loading.present();\n    let lines = [];\n    for (let i = 0; i <  this.products.products.length; i++) {\n      lines.push(this.products.products)\n      lines\n      \n    }\n    let order = [{ \n      \"FECHA\": \"01/09/2020\", \n      \"CODCLI\": \"1\", \n      \"CODALM\": \"1\", \n      \"ESTADO\": \"AC\", \n      \"FECENTREGA\": \"02/09/2020\", \n      \"SITUACION\": \"A\", \n      \"lineas\": [{ lines\n         }] \n        }];\n    (await this.apiService.sendOrder(order)).subscribe(\n      (response) => {\n        console.log(response);\n        \n      }, async (error) => {\n        console.log(error)\n        if (error.status === 401) {\n          this.logout();\n          this.loadingController.dismiss();\n        } else {\n          const alert = await this.alertController.create({\n            header: 'Error',\n            subHeader: 'Parece que hay problemas',\n            buttons: ['OK']\n          });\n          await alert.present();\n        }\n      }\n    )\n  }\n\n  async logout() {\n    await this.authService.logout();\n    this.router.navigateByUrl('/', { replaceUrl: true });\n  }\n\n}\n"],"sourceRoot":"webpack:///"}