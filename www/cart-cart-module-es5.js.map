{"version":3,"sources":["webpack:///src/app/cart/cart.page.html","webpack:///src/app/cart/cart-routing.module.ts","webpack:///src/app/cart/cart.module.ts","webpack:///src/app/cart/cart.page.scss","webpack:///src/app/cart/cart.page.ts","webpack:///src/app/stripe.service.ts"],"names":["routes","path","component","CartPageRoutingModule","imports","forChild","exports","CartPageModule","declarations","Storage","CartPage","apiService","loadingController","alertController","authService","router","ngZone","stripeService","card","elements","create","mount","cardInfo","nativeElement","addEventListener","onChange","bind","_elements","error","run","cardError","message","products","history","state","total","i","length","parseFloat","pRCCOMPRA","replace","quantity","p","iD","splice","remove","key","set","value","JSON","stringify","translucent","loading","present","stripe","createToken","token","charge","getTotal","id","then","lines","push","cODART","console","log","order","sendOrder","subscribe","response","dismiss","status","logout","header","subHeader","buttons","alert","reason","navigateByUrl","replaceUrl","selector","template","providers","TOKEN_KEY","USER","StripeService","http","cantidad","tokenId","get","parse","headers","Token","post","stripeToken","toPromise","providedIn"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,qBAAqB;AAAA;AAAA,O;;AAArBA,2BAAqB,6DAJjC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIiC,GAArBH,qBAAqB,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCGAI,cAAc;AAAA;AAAA,O;;AAAdA,oBAAc,6DAT1B,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,0EAJO,CADD;AAORI,oBAAY,EAAE,CAAC,mDAAD;AAPN,OAAT,CAS0B,GAAdD,cAAc,CAAd;;;;;;;;;;;;;;;;ACnBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCSPE,O,GAAY,uD,CAAZA,O;;UAOKC,QAAQ;AAOnB,0BACUC,UADV,EAESC,iBAFT,EAGSC,eAHT,EAIUC,WAJV,EAKUC,MALV,EAMUC,MANV,EAOUC,aAPV,EAOwC;AAAA;;AAN9B,eAAAN,UAAA,GAAAA,UAAA;AACD,eAAAC,iBAAA,GAAAA,iBAAA;AACA,eAAAC,eAAA,GAAAA,eAAA;AACC,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,aAAA,GAAAA,aAAA;AAAiC;;AAdxB;AAAA;AAAA,4CAgBD;AAChB,iBAAKC,IAAL,GAAYC,QAAQ,CAACC,MAAT,CAAgB,MAAhB,CAAZ;AACA,iBAAKF,IAAL,CAAUG,KAAV,CAAgB,KAAKC,QAAL,CAAcC,aAA9B;AACA,iBAAKL,IAAL,CAAUM,gBAAV,CAA2B,QAA3B,EAAqC,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAArC;AACD;AApBkB;AAAA;AAAA,wCAsBL;AACZP,oBAAQ,CAACQ,SAAT,GAAqB,EAArB;AACD;AAxBkB;AAAA;AAAA,yCA0BC;AAAA;;AAAA,gBAATC,KAAS,QAATA,KAAS;;AAClB,gBAAIA,KAAJ,EAAW;AACT,mBAAKZ,MAAL,CAAYa,GAAZ,CAAgB;AAAA,uBAAM,KAAI,CAACC,SAAL,GAAiBF,KAAK,CAACG,OAA7B;AAAA,eAAhB;AACD,aAFD,MAEO;AACL,mBAAKf,MAAL,CAAYa,GAAZ,CAAgB;AAAA,uBAAM,KAAI,CAACC,SAAL,GAAiB,IAAvB;AAAA,eAAhB;AACD;AACF;AAhCkB;AAAA;AAAA,qCAiCR;AACT,iBAAKE,QAAL,GAAgBC,OAAO,CAACC,KAAxB;AACD;AAnCkB;AAAA;AAAA,qCAqCR;AACT,gBAAIC,KAAK,GAAG,CAAZ;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKJ,QAAL,CAAcA,QAAd,CAAuBK,MAA3C,EAAmDD,CAAC,EAApD,EAAwD;AACtDD,mBAAK,IAAIG,UAAU,CAAC,KAAKN,QAAL,CAAcA,QAAd,CAAuBI,CAAvB,EAA0BG,SAA1B,CAAoCC,OAApC,CAA4C,GAA5C,EAAiD,GAAjD,CAAD,CAAV,GAAoE,KAAKR,QAAL,CAAcA,QAAd,CAAuBI,CAAvB,EAA0BK,QAAvG;AACD;;AACD,mBAAON,KAAP;AACD;AA3CkB;AAAA;AAAA,iCA6CNO,CA7CM,EA6CH;;;;;;;AACLN,uB,GAAI,C;;;4BAAGA,CAAC,GAAG,KAAKJ,QAAL,CAAcA,QAAd,CAAuBK,M;;;;;4BACrC,KAAKL,QAAL,CAAcA,QAAd,CAAuBI,CAAvB,EAA0BO,EAA1B,IAAgCD,CAAC,CAACC,E;;;;;AACpC,2BAAKX,QAAL,CAAcA,QAAd,CAAuBY,MAAvB,CAA8BR,CAA9B,EAAiC,CAAjC;;AACA,6BAAM3B,OAAO,CAACoC,MAAR,CAAe;AAAEC,2BAAG,EAAE;AAAP,uBAAf,CAAN;;;AACArC,6BAAO,CAACsC,GAAR,CAAY;AAAED,2BAAG,EAAE,UAAP;AAAmBE,6BAAK,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKlB,QAAL,CAAcA,QAA7B;AAA1B,uBAAZ;;;;AAJ+CI,uBAAC,E;;;;;;;;;;;AAQrD;AAtDkB;AAAA;AAAA,sCAwDD;;;;;;;;;;;AACA,6BAAM,KAAKxB,iBAAL,CAAuBQ,MAAvB,CAA8B;AAClDW,+BAAO,EAAE,aADyC;AAElDoB,mCAAW,EAAE;AAFqC,uBAA9B,CAAN;;;AAAVC,6B;;AAIN,6BAAMA,OAAO,CAACC,OAAR,EAAN;;;;AACyB,6BAAMC,MAAM,CAACC,WAAP,CAAmB,KAAKrC,IAAxB,CAAN;;;;AAAjBsC,2B,yBAAAA,K;AAAO5B,2B,yBAAAA,K;;2BACX4B,K;;;;;;AACF,6BAAM,KAAKvC,aAAL,CAAmBwC,MAAnB,CAA0B,KAAKC,QAAL,EAA1B,EAA2CF,KAAK,CAACG,EAAjD,EAAqDC,IAArD,CAA0D,UAAgBZ,KAAhB,EAAuB;;;;;;;;;AACjFa,uC,GAAQ,E;;AACZ,uCAASzB,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAG,KAAKJ,QAAL,CAAcA,QAAd,CAAuBK,MAA3C,EAAmDD,CAAC,EAApD,EAAwD;AACtDyB,yCAAK,CAACC,IAAN,CAAW;AACT,gDAAU,KAAK9B,QAAL,CAAcA,QAAd,CAAuBI,CAAvB,EAA0B2B,MAD3B;AAET,kDAAY,KAAK/B,QAAL,CAAcA,QAAd,CAAuBI,CAAvB,EAA0BK;AAF7B,qCAAX;AAIAuB,2CAAO,CAACC,GAAR,CAAYJ,KAAZ;AACD;;AACGK,uC,GAAQ,CAAC;AACX,6CAAS,YADE;AAEX,8CAAU,GAFC;AAGX,8CAAU,GAHC;AAIX,8CAAU,IAJC;AAKX,kDAAc,YALH;AAMX,iDAAa,GANF;AAOX,8CAAUL;AAPC,mCAAD,C;;AASX,yCAAM,KAAKlD,UAAL,CAAgBwD,SAAhB,CAA0BD,KAA1B,CAAN;;;iDAAwCE,S,CACvC,UAACC,QAAD,EAAc;AACZL,2CAAO,CAACC,GAAR,CAAYI,QAAZ;;AACA,0CAAI,CAACzD,iBAAL,CAAuB0D,OAAvB;AACD,mC,EAAE,UAAO1C,KAAP;AAAA,2CAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAClBoC,qDAAO,CAACC,GAAR,CAAYrC,KAAZ;;AADkB,oDAEdA,KAAK,CAAC2C,MAAN,KAAiB,GAFH;AAAA;AAAA;AAAA;;AAGhB,mDAAKC,MAAL;AACA,mDAAK5D,iBAAL,CAAuB0D,OAAvB;AAJgB;AAAA;;AAAA;AAAA;AAMF,qDAAM,KAAKzD,eAAL,CAAqBO,MAArB,CAA4B;AAC9CqD,sDAAM,EAAE,OADsC;AAE9CC,yDAAS,EAAE,0BAFmC;AAG9CC,uDAAO,EAAE,CAAC,IAAD;AAHqC,+CAA5B,CAAN;;AANE;AAMVC,mDANU;AAAA;AAWhB,qDAAMA,KAAK,CAACvB,OAAN,EAAN;;AAXgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAAjB;AAAA,mC;;;;;;;;;AAeN,uBArCK,EAqCH,UAAgBwB,MAAhB,EAAwB;;;;;;;;AACX,yCAAM,KAAKhE,eAAL,CAAqBO,MAArB,CAA4B;AAC9CqD,0CAAM,EAAE,OADsC;AAE9CC,6CAAS,EAAE,sCAFmC;AAG9CC,2CAAO,EAAE,CAAC,IAAD;AAHqC,mCAA5B,CAAN;;;AAARC,uC;;AAKN,yCAAMA,KAAK,CAACvB,OAAN,EAAN;;;;;;;;;AACD,uBA5CK,CAAN;;;;;;;AA8CA,2BAAKrC,MAAL,CAAYa,GAAZ,CAAgB;AAAA,+BAAM,MAAI,CAACC,SAAL,GAAiBF,KAAK,CAACG,OAA7B;AAAA,uBAAhB;;;;;;;;;AAKH;AAnHkB;AAAA;AAAA,mCAqHJ;;;;;;;AACb,6BAAM,KAAKjB,WAAL,CAAiB0D,MAAjB,EAAN;;;AACA,2BAAKzD,MAAL,CAAY+D,aAAZ,CAA0B,GAA1B,EAA+B;AAAEC,kCAAU,EAAE;AAAd,uBAA/B;;;;;;;;;AACD;AAxHkB;;AAAA;AAAA,S;;;;gBAbZ;;gBACA;;gBACA;;gBACA;;gBACA;;gBAN0C;;gBAD1C;;;;;;gBAiBN,uD;AAAS,iBAAC,UAAD;;;AADCrE,cAAQ,6DANpB,gEAAU;AACTsE,gBAAQ,EAAE,UADD;AAETC,gBAAQ,EAAR;AAAA;AAAA,0FAFS;AAITC,iBAAS,EAAE,CAAC,gEAAD,CAJF;;;;AAAA,OAAV,CAMoB,GAARxE,QAAQ,CAAR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCZLD,O,GAAY,uD,CAAZA,O;AACR,UAAM0E,SAAS,GAAG,UAAlB;AACA,UAAMC,IAAI,GAAG,EAAb;;UAIaC,aAAa;AAGxB,+BAAoBC,IAApB,EAAsC;AAAA;;AAAlB,eAAAA,IAAA,GAAAA,IAAA;AAAqB;;AAHjB;AAAA;AAAA,iCAKXC,QALW,EAKDC,OALC,EAKQ;;;;;;;;AACjB,6BAAM/E,OAAO,CAACgF,GAAR,CAAY;AAAE3C,2BAAG,EAAEqC;AAAP,uBAAZ,CAAN;;;AAAb,2BAAK3B,K;AACL,2BAAKA,KAAL,GAAaP,IAAI,CAACyC,KAAL,CAAW,KAAKlC,KAAL,CAAWR,KAAtB,CAAb;AACI2C,6B,GAAU,IAAI,gEAAJ,CAAgB;AAC5B,wCAAgB,kCADY;AAE5B,yCAAiB,YAAY,KAAKnC,KAAL,CAAWoC;AAFZ,uBAAhB,C;wDAIP,KAAKN,IAAL,CAAUO,IAAV,CAAe,kDAAf,EAAmE;AACxEC,mCAAW,EAAEN,OAD2D;AAExED,gCAAQ,EAAEA,QAAQ,GAAG;AAFmD,uBAAnE,EAGJ;AAAEI,+BAAO,EAAEA;AAAX,uBAHI,EAGkBI,SAHlB,E;;;;;;;;;AAIR;AAhBuB;;AAAA;AAAA,S;;;;gBATjB;;;;AASIV,mBAAa,6DAHzB,iEAAW;AACVW,kBAAU,EAAE;AADF,OAAX,CAGyB,GAAbX,aAAa,CAAb","file":"cart-cart-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Carrito</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list *ngIf=\\\"products\\\">\\n    <ion-list-header>\\n      Pedido\\n    </ion-list-header>\\n\\n    <ion-item-sliding *ngFor=\\\"let p of products.products\\\">\\n      <ion-item-options side=\\\"start\\\">\\n        <ion-item-option color=\\\"danger\\\" (click)=\\\"remove(p)\\\"><ion-icon style=\\\"zoom:1.5;\\\" name=\\\"trash-outline\\\"></ion-icon></ion-item-option>\\n      </ion-item-options>\\n    <ion-item>\\n      <ion-thumbnail slot=\\\"start\\\">\\n        <ion-img\\n          src=\\\"https://rockcontent.com/es/wp-content/uploads/2019/02/o-que-e-produto-no-mix-de-marketing-1280x720.png\\\">\\n        </ion-img>\\n      </ion-thumbnail>\\n      <ion-label>\\n        <h2>{{p.aRTALIAS}}</h2>\\n        <h3>{{p.dESCART}}</h3>\\n        <p>x{{p.quantity}}</p>\\n      </ion-label>\\n      <div slot=\\\"end\\\">\\n        <h2>{{p.pRCCOMPRA}}€</h2>\\n      </div>\\n    </ion-item>\\n    </ion-item-sliding>\\n    <ion-item>\\n      <h3>Total:</h3>\\n      <div slot=\\\"end\\\">\\n        <h2>{{getTotal() | number : '1.2-2'}}€</h2>\\n      </div>\\n    </ion-item>\\n  </ion-list>\\n\\n  <ion-radio-group value=\\\"credito\\\">\\n    <ion-list-header>\\n      <ion-label>Forma de pago</ion-label>\\n    </ion-list-header>\\n\\n    <ion-item>\\n      <ion-label>Crédito</ion-label>\\n      <ion-radio slot=\\\"start\\\" value=\\\"credito\\\"></ion-radio>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label>Efectivo</ion-label>\\n      <ion-radio slot=\\\"start\\\" value=\\\"efectivo\\\"></ion-radio>\\n    </ion-item>\\n\\n  </ion-radio-group>\\n\\n  <ion-list>\\n    <ion-list-header>Envio</ion-list-header>\\n    <ion-item>\\n      <ion-label>Pedido urgente</ion-label>\\n      <ion-checkbox color=\\\"primary\\\" checked slot=\\\"start\\\"></ion-checkbox>\\n    </ion-item>\\n  </ion-list>\\n  <div class=\\\"credit-card\\\">\\n    <div>\\n      <div #cardInfo></div>\\n      <div class=\\\"error\\\" *ngIf=\\\"cardError\\\">\\n        {{cardError}}\\n      </div>\\n    </div>\\n  </div>\\n  <!-- <ion-button [disabled]=\\\"products.products.length == 0\\\" (click)=\\\"sendOrder()\\\" shape=\\\"round\\\" expand=\\\"block\\\">Pedir</ion-button> -->\\n  <ion-button  (click)=\\\"sendOrder()\\\" shape=\\\"round\\\" expand=\\\"block\\\">Pedir</ion-button>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CartPage } from './cart.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CartPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CartPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CartPageRoutingModule } from './cart-routing.module';\n\nimport { CartPage } from './cart.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CartPageRoutingModule\n  ],\n  declarations: [CartPage]\n})\nexport class CartPageModule {}\n","export default \".credit-card {\\n  width: 400px;\\n  height: 50px;\\n  border: 1px solid black;\\n  padding: 20px;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FydC9jYXJ0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNHLFlBQUE7RUFDQSxZQUFBO0VBQ0EsdUJBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsNkJBQUE7QUFDSCIsImZpbGUiOiJzcmMvYXBwL2NhcnQvY2FydC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY3JlZGl0LWNhcmR7XG4gICB3aWR0aDogNDAwcHg7XG4gICBoZWlnaHQ6IDUwcHg7XG4gICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgIHBhZGRpbmc6IDIwcHg7XG4gICBkaXNwbGF5OiBmbGV4O1xuICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgIGp1c3RpZnktY29udGVudDogc3BhY2UtZXZlbmx5O1xufSJdfQ== */\";","import { StripeService } from './../stripe.service';\nimport { Component, OnInit, ElementRef, ViewChild, NgZone } from '@angular/core';\nimport { Plugins } from '@capacitor/core';\nimport { ApiService } from '../services/api.service';\nimport { LoadingController } from '@ionic/angular';\nimport { AlertController } from '@ionic/angular';\nimport { AuthenticationService } from '../services/authentication.service';\nimport { Router } from '@angular/router';\n\nconst { Storage } = Plugins;\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.page.html',\n  styleUrls: ['./cart.page.scss'],\n  providers: [ApiService]\n})\nexport class CartPage implements OnInit {\n  @ViewChild('cardInfo') cardInfo: ElementRef;\n  cardError: string;\n  card: any;\n\n\n  public products;\n  constructor(\n    private apiService: ApiService,\n    public loadingController: LoadingController,\n    public alertController: AlertController,\n    private authService: AuthenticationService,\n    private router: Router,\n    private ngZone: NgZone,\n    private stripeService: StripeService) { }\n\n  ngAfterViewInit() {\n    this.card = elements.create('card');\n    this.card.mount(this.cardInfo.nativeElement);\n    this.card.addEventListener('change', this.onChange.bind(this))\n  }\n\n  ngOnDestroy() {\n    elements._elements = []\n  }\n\n  onChange({ error }) {\n    if (error) {\n      this.ngZone.run(() => this.cardError = error.message);\n    } else {\n      this.ngZone.run(() => this.cardError = null);\n    }\n  }\n  ngOnInit() {\n    this.products = history.state\n  }\n\n  getTotal() {\n    var total = 0;\n    for (let i = 0; i < this.products.products.length; i++) {\n      total += parseFloat(this.products.products[i].pRCCOMPRA.replace(/,/, '.')) * this.products.products[i].quantity;\n    }\n    return total;\n  }\n\n  async remove(p) {\n    for (var i = 0; i < this.products.products.length; i++) {\n      if (this.products.products[i].iD == p.iD) {\n        this.products.products.splice(i, 1);\n        await Storage.remove({ key: 'PRODUCTS' });\n        Storage.set({ key: 'PRODUCTS', value: JSON.stringify(this.products.products) })\n        break;\n      }\n    }\n  }\n\n  async sendOrder() {\n    const loading = await this.loadingController.create({\n      message: 'Cargando...',\n      translucent: true,\n    });\n    await loading.present();\n    const { token, error } = await stripe.createToken(this.card);\n    if (token) {\n      await this.stripeService.charge(this.getTotal(), token.id).then(async function (value) {\n        let lines = [];\n        for (let i = 0; i < this.products.products.length; i++) {\n          lines.push({\n            \"CODART\": this.products.products[i].cODART,\n            \"UNIDADES\": this.products.products[i].quantity\n          })\n          console.log(lines)\n        }\n        let order = [{\n          \"FECHA\": \"03/05/2021\",\n          \"CODCLI\": \"1\",\n          \"CODALM\": \"1\",\n          \"ESTADO\": \"AC\",\n          \"FECENTREGA\": \"08/05/2021\",\n          \"SITUACION\": \"A\",\n          \"lineas\": lines\n        }];\n        (await this.apiService.sendOrder(order)).subscribe(\n          (response) => {\n            console.log(response);\n            this.loadingController.dismiss();\n          }, async (error) => {\n            console.log(error)\n            if (error.status === 401) {\n              this.logout();\n              this.loadingController.dismiss();\n            } else {\n              const alert = await this.alertController.create({\n                header: 'Error',\n                subHeader: 'Parece que hay problemas',\n                buttons: ['OK']\n              });\n              await alert.present();\n            }\n          }\n        )\n      }, async function (reason) {\n        const alert = await this.alertController.create({\n          header: 'Error',\n          subHeader: 'No ha sido posible completar el pago',\n          buttons: ['OK']\n        });\n        await alert.present();\n      });\n    } else {\n      this.ngZone.run(() => this.cardError = error.message);\n    }\n\n\n\n  }\n\n  async logout() {\n    await this.authService.logout();\n    this.router.navigateByUrl('/', { replaceUrl: true });\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Plugins } from '@capacitor/core';\n\nconst { Storage } = Plugins;\nconst TOKEN_KEY = 'my-token';\nconst USER = '';\n@Injectable({\n  providedIn: 'root'\n})\nexport class StripeService {\n  public token;\n\n  constructor(private http: HttpClient) { }\n\n  async charge(cantidad, tokenId) {\n    this.token = await Storage.get({ key: TOKEN_KEY });\n    this.token = JSON.parse(this.token.value)\n    let headers = new HttpHeaders({\n      'Content-Type': 'application/json; charset=UTF-8\"',\n      'Authorization': 'Bearer ' + this.token.Token\n    });\n    return this.http.post('https://clouddemosjnc.dyndns.org:5002/PagoStripe', {\n      stripeToken: tokenId,\n      cantidad: cantidad * 100,\n    }, { headers: headers }).toPromise();\n  }\n}\n"]}